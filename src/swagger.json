{
  "openapi": "3.0.3",
  "info": {
    "title": "My API Documentation",
    "description": "My API description goes here.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://localhost"
    }
  ],
  "tags": [
    {
      "name": "Users",
      "description": "Everything about users.",
      "externalDocs": {
        "description": "Find out more",
        "url": "http://swagger.io"
      }
    },
    {
      "name": "Products",
      "description": "Everything about products."
    }
  ],
  "paths": {
    "/api/v1/users/register": {
      "post": {
        "tags": ["Users"],
        "summary": "Creates user with given body info.",
        "description": "Creates user with given body info.",
        "operationId": "registerUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegistrationBody"
              },
              "example": {
                "username": "SuperUser",
                "email": "super_user@email.com",
                "password": "123456"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "User was created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessPostResponse"
                }
              }
            }
          },
          "400": {
            "description": "User already exits.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": true,
                  "status": 400,
                  "message": "Username, email and password must be provided to register an user"
                }
              }
            }
          },
          "409": {
            "description": "User already exits.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": true,
                  "status": 409,
                  "message": "User already exists"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/users/login": {
      "post": {
        "tags": ["Users"],
        "summary": "Receive JWT Token after successfull login.",
        "description": "Receive JWT Token after successfull login.",
        "operationId": "loginUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegistrationBody"
              },
              "example": {
                "username": "SuperUser",
                "email": "super_user@email.com",
                "password": "123456"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "User logged in.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponseWithStringBody"
                }
              }
            }
          },
          "400": {
            "description": "Multiple reasons for a bad request.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequest"
                },
                "examples": {
                  "BadRequest_1": {
                    "summary": "Username or email not provided.",
                    "value": {
                      "error": true,
                      "status": 400,
                      "message": "You can't login without providing an username or email"
                    }
                  },
                  "BadRequest_2": {
                    "summary": "Too many attributes.",
                    "value": {
                      "error": true,
                      "status": 400,
                      "message": "You can only do a login with a username or an email, but not both"
                    }
                  },
                  "BadRequest_3": {
                    "summary": "Password not provided.",
                    "value": {
                      "error": true,
                      "status": 400,
                      "message": "No password was provided"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": true,
                  "status": 404,
                  "message": "This user doesn't exists."
                }
              }
            }
          },
          "500": {
            "description": "Unexpected error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/responses/InternalServerError"
                },
                "examples": {
                  "PasswordDontMatch": {
                    "summary": "Password do not match.",
                    "value": {
                      "error": true,
                      "status": 500,
                      "message": "Password do not match"
                    }
                  },
                  "InternalError": {
                    "summary": "Internal server error.",
                    "value": {
                      "error": true,
                      "status": 500,
                      "message": "Internal server error"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{userId}": {
      "get": {
        "tags": ["Users"],
        "summary": "Get user by ID",
        "description": "Get user information by their ID.",
        "operationId": "getUser",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "ID of the user to retrieve.",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "1nt3io20_3"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFoundResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Users"],
        "summary": "Update user providing and ID and a token.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "description": "Update the user information, if that user is yours.",
        "operationId": "updateUser",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "ID of the user to retrieve.",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "1"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponseWithStringBody"
                },
                "example": {
                  "error": false,
                  "status": 201,
                  "message": "Your profile was updated succesfully",
                  "body": "The item you wanted to update was indeed updated."
                }
              }
            }
          },
          "401": {
            "description": "Various errors might ocurr regarding authentication.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotAuthorized"
                }
              }
            }
          },
          "500": {
            "description": "Various errors might ocurr.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/responses/InternalServerError"
                },
                "examples": {
                  "InternalError_1": {
                    "summary": "User getting updated doesn't exists.",
                    "value": {
                      "error": true,
                      "status": 500,
                      "message": "The user you are trying to update doesn't exists"
                    }
                  },
                  "InternalError_2": {
                    "summary": "User credentials don't match token info.",
                    "value": {
                      "error": true,
                      "status": 500,
                      "message": "You are not allowed to do this."
                    }
                  },
                  "BadRequest_3": {
                    "summary": "Internal server error.",
                    "value": {
                      "error": true,
                      "status": 500,
                      "message": "Internal server error"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Users"],
        "summary": "Delete user by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "description": "Deleted user information based on ID provided.",
        "operationId": "deleteUser",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "ID of the user to delete.",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "1"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponseWithStringBody"
                },
                "example": {
                  "error": false,
                  "status": 201,
                  "message": "Your profile was deleted succesfully",
                  "body": "All information was deleted"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFoundResponse"
                }
              }
            }
          },
          "500": {
            "description": "Various errors might ocurr.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/responses/InternalServerError"
                },
                "examples": {
                  "InternalError_1": {
                    "summary": "User getting updated doesn't exists.",
                    "value": {
                      "error": true,
                      "status": 500,
                      "message": "The user you are trying to update doesn't exists"
                    }
                  },
                  "InternalError_2": {
                    "summary": "User credentials don't match token info.",
                    "value": {
                      "error": true,
                      "status": 500,
                      "message": "You are not allowed to do this."
                    }
                  },
                  "BadRequest_3": {
                    "summary": "Internal server error.",
                    "value": {
                      "error": true,
                      "status": 500,
                      "message": "Internal server error"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "format": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "John Doe"
          },
          "avatar": {
            "type": "string",
            "format": "url",
            "example": "http://to_cool_image.com"
          }
        }
      },
      "UserRegistrationBody": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "format": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "John Doe"
          },
          "password": {
            "type": "string",
            "format": "string",
            "example": "securepassword1234"
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates whether an error occurred or not.",
            "example": false
          },
          "status": {
            "type": "integer",
            "description": "HTTP status code.",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "A message describing the response.",
            "example": "This request was successfull, here is some relevant information about this request:"
          },
          "body": {
            "type": "array",
            "description": "An array of objects that can vary depending on the specific request. For example, when doing request to getUsers you will receive and object with their email, username and avatar.",
            "items": {
              "type": "object"
            }
          }
        }
      },
      "SuccessResponseWithStringBody": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates whether an error occurred or not.",
            "example": false
          },
          "status": {
            "type": "integer",
            "description": "HTTP status code.",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "A message describing the response.",
            "example": "This request was successfull, here is some relevant information about this request:"
          },
          "body": {
            "type": "string",
            "description": "A message about the operation or a token, in case of loggin an user.",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          }
        }
      },
      "SuccessPostResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates whether an error occurred or not.",
            "example": false
          },
          "status": {
            "type": "integer",
            "description": "HTTP status code.",
            "example": 201
          },
          "message": {
            "type": "string",
            "description": "A message describing the response.",
            "example": "This request was successfull, here is some relevant information about this request:"
          },
          "body": {
            "type": "array",
            "description": "An array of objects that can vary depending on the specific request. For example, when doing request to getUsers you will receive and object with their email, username and avatar.",
            "items": {
              "type": "object"
            }
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates whether an error occurred or not.",
            "example": true
          },
          "status": {
            "type": "integer",
            "description": "HTTP status code.",
            "example": 500
          },
          "message": {
            "type": "string",
            "description": "A message describing what's the cause of the error. It varies a lot depending on the endpoint called and the different bodies provided.",
            "example": "Somewthing wrong ocurred, please try again."
          }
        }
      },
      "BadRequest": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates whether an error occurred or not.",
            "example": true
          },
          "status": {
            "type": "integer",
            "description": "HTTP status code.",
            "example": 400
          },
          "message": {
            "type": "string",
            "description": "request.body didn't meet the criteriah for this endpoint.",
            "example": "The attributes you must passed are X and Y and must have these types..."
          }
        }
      },
      "NotFoundResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates whether an error occurred or not.",
            "example": true
          },
          "status": {
            "type": "integer",
            "description": "HTTP status code.",
            "example": 404
          },
          "message": {
            "type": "string",
            "description": "The resource you were searching for wasn't found.",
            "example": "The resource X wasn't found or doesn't exists."
          }
        }
      },
      "NotAuthorized": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates whether an error occurred or not.",
            "example": true
          },
          "status": {
            "type": "integer",
            "description": "HTTP status code.",
            "example": 401
          },
          "message": {
            "type": "string",
            "description": "You are not allowed to do this. Reasons may vary, such as invalid token, no token provided, credentials not matching with the token info, etc...",
            "example": "This token or authorization was invalid."
          }
        }
      }
    },
    "responses": {
      "ResourceCreated": {
        "description": "The resource provided on the request was created. (Personalized message depending on endpoint called)",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/SuccessResponse"
            }
          }
        }
      },
      "ResourceUpdated": {
        "description": "The resource provided on the request was updated.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/SuccessResponse"
            }
          }
        }
      },
      "InvalidRequestBody": {
        "description": "Something about the request body sent wasn't provided or the properties didn't matcht the types required.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "ResourceAlreadyExists": {
        "description": "The resource you've tried to create (for example, a username with the same email you've provided) already exists and can't be created.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "InternalServerError": {
        "description": "There was an unexpected error during the request and couldn't perform the action.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
